<UserControl x:Class="SelfTracker.Views.TodayDashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="Transparent"
             FontFamily="Microsoft YaHei, Segoe UI">

    <UserControl.Resources>
        <SolidColorBrush x:Key="PrimaryBlue" Color="#2563EB"/>
        <SolidColorBrush x:Key="PrimaryBlueLight" Color="#EFF6FF"/>
        <SolidColorBrush x:Key="TextMain" Color="#1E293B"/>
        <SolidColorBrush x:Key="TextSub" Color="#64748B"/>
        <SolidColorBrush x:Key="BorderLight" Color="#E2E8F0"/>

        <Style x:Key="StatCard" TargetType="{x:Type Border}">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="24"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderLight}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" Opacity="0.05" BlurRadius="20" ShadowDepth="4"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="PrimaryButton" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="{StaticResource PrimaryBlue}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="28,12"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border x:Name="border" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#1D4ED8"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#1E40AF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="32,24,32,32">

            <Border Style="{StaticResource StatCard}" Margin="8,8,8,16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Background="{StaticResource PrimaryBlueLight}" Width="52" Height="52" CornerRadius="26" Margin="0,0,16,0">
                        <Path Data="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6Z" 
                              Fill="{StaticResource PrimaryBlue}" 
                              Stretch="Uniform" Width="26"/>
                    </Border>

                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock Text="{Binding CurrentProcess}" FontSize="17" FontWeight="Bold" Foreground="{StaticResource TextMain}"/>
                        <TextBlock Text="{Binding CurrentWindow}" FontSize="13" Foreground="{StaticResource TextSub}" Margin="0,2,0,0" TextTrimming="CharacterEllipsis"/>
                    </StackPanel>
                </Grid>
            </Border>

            <UniformGrid Columns="2">
                <Border Style="{StaticResource StatCard}">
                    <StackPanel>
                        <TextBlock Text="今日打字 (Keys)" FontSize="13" FontWeight="SemiBold" Foreground="{StaticResource TextSub}"/>
                        <TextBlock Text="{Binding KeyboardCountText}" FontSize="32" FontWeight="Bold" Foreground="{StaticResource TextMain}" Margin="0,12,0,0"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource StatCard}">
                    <StackPanel>
                        <TextBlock Text="复制次数 (Clips)" FontSize="13" FontWeight="SemiBold" Foreground="{StaticResource TextSub}"/>
                        <TextBlock Text="{Binding ClipboardCountText}" FontSize="32" FontWeight="Bold" Foreground="{StaticResource TextMain}" Margin="0,12,0,0"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource StatCard}">
                    <StackPanel>
                        <TextBlock Text="总使用时间" FontSize="13" FontWeight="SemiBold" Foreground="{StaticResource TextSub}"/>
                        <TextBlock Text="{Binding TodayActiveTimeText}" FontSize="32" FontWeight="Bold" Foreground="{StaticResource PrimaryBlue}" Margin="0,12,0,0"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource StatCard}">
                    <StackPanel>
                        <TextBlock Text="离开时间 (AFK)" FontSize="13" FontWeight="SemiBold" Foreground="{StaticResource TextSub}"/>
                        <TextBlock Text="{Binding TodayAFKTimeText}" FontSize="32" FontWeight="Bold" Foreground="#F59E0B" Margin="0,12,0,0"/>
                    </StackPanel>
                </Border>
            </UniformGrid>

            <Button Content="立即刷新数据" 
                    Style="{StaticResource PrimaryButton}" 
                    HorizontalAlignment="Center" 
                    Margin="0,32,0,0" 
                    Click="RefreshNow_Click" Cursor="Hand"/>
        </StackPanel>
    </ScrollViewer>
</UserControl>