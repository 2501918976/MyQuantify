<Window x:Class="SelfTracker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        Title="SelfTracker" Height="700" Width="900"
        Icon="/Res/863kp-8yn1t-001.ico"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None" 
        AllowsTransparency="True"
        Background="Transparent"
        FontFamily="Microsoft YaHei, Segoe UI">

    <Window.Resources>
        <SolidColorBrush x:Key="PrimaryBlue" Color="#2563EB"/>
        <SolidColorBrush x:Key="PrimaryBlueLight" Color="#EFF6FF"/>
        <SolidColorBrush x:Key="TextMain" Color="#1E293B"/>
        <SolidColorBrush x:Key="TextSub" Color="#64748B"/>
        <SolidColorBrush x:Key="BorderLight" Color="#E2E8F0"/>
        <SolidColorBrush x:Key="DangerRed" Color="#EF4444"/>

        <Style x:Key="NavButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource TextSub}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryBlueLight}"/>
                                <Setter Property="Foreground" Value="{StaticResource PrimaryBlue}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#DBEAFE"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="15">
        <Border CornerRadius="12" Background="White">
            <Border.Effect>
                <DropShadowEffect Color="Black" Opacity="0.1" BlurRadius="25" ShadowDepth="2"/>
            </Border.Effect>

            <Grid>
                <Grid.Clip>
                    <RectangleGeometry RadiusX="12" RadiusY="12" Rect="0,0,870,670"/>
                </Grid.Clip>

                <Grid x:Name="BackgroundGrid">
                    <Grid.Background>
                        <ImageBrush x:Name="WallpaperBrush" Stretch="UniformToFill" />
                    </Grid.Background>
                    <Border Background="#F8FAFC" CornerRadius="12" Opacity="0.9">
                        <Border.Effect>
                            <BlurEffect Radius="40" RenderingBias="Quality" />
                        </Border.Effect>
                    </Border>
                </Grid>

                <tb:TaskbarIcon x:Name="MyNotifyIcon" IconSource="/Res/863kp-8yn1t-001.ico" ToolTipText="SelfTracker 正在运行"/>

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Border Grid.Row="0" Background="Transparent" Padding="28,24" MouseLeftButtonDown="Header_MouseLeftButtonDown">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                                <TextBlock Text="SelfTracker" FontSize="22" FontWeight="Bold" Foreground="{StaticResource TextMain}" />
                            </StackPanel>

                            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="40,0,0,0">
                                <Button Content="今日数据" Style="{StaticResource NavButton}" Click="Nav_Click" Tag="Today"/>
                                <Button Content="历史数据" Style="{StaticResource NavButton}" Click="Nav_Click" Tag="History" Margin="8,0,0,0"/>
                                <Button Content="应用分类" Style="{StaticResource NavButton}" Click="Nav_Click" Tag="Category" Margin="8,0,0,0"/>
                                <Button Content="设置" Style="{StaticResource NavButton}" Click="Nav_Click" Tag="Settings" Margin="8,0,0,0"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                                <Rectangle Width="1" Height="20" Fill="{StaticResource BorderLight}" Margin="12,0,12,0"/>

                                <Button Content="—" Style="{StaticResource NavButton}" Click="BtnMinimize_Click" Width="36" />
                                <Button Content="✕" Style="{StaticResource NavButton}" Click="BtnClose_Click" Width="36" Foreground="{StaticResource DangerRed}"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <ContentControl x:Name="MainContentRegion" Grid.Row="1" Margin="0" Background="Transparent"/>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</Window>